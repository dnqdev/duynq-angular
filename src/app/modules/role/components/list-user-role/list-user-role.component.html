<div class="bg-white p-8 h-full">
  <div>
    <div class="d-flex algin-items-center justify-content-between">
      <h3 class="title-compo-global">Danh sách người dùng</h3>
    </div>
    <div class="mt-5">
      <div class="d-flex w-full">
        <div class="d-flex align-items-center info">
          <span>Tên phân quyền:</span>
          <span>{{infoRole?.name || '--'}}</span>
        </div>
        <div class="d-flex align-items-center info">
          <span>Mã phân quyền:</span>
          <span>{{infoRole?.code || '--'}}</span>
        </div>
        <div class="d-flex align-items-center info">
          <span>Layout áp dụng:</span>
          <span>{{mapNameLayout()}}</span>
        </div>
      </div>
    </div>
  </div>


  <div class="mt-15">
    <div class="filter d-flex flex-wrap algin-items-center justify-content-end">
      <div class="so-input-search mx-4 mb-3">
        <nz-input-group [nzSuffix]="suffixIconSearch">
          <input type="text" name="input-search" nz-input placeholder="Tìm kiếm" #searchInput
            (keydown)="search($event, searchInput.value)" />
        </nz-input-group>
        <ng-template #suffixIconSearch>
          <img src="assets/images/svg/search.svg" alt="" nzType="search">
        </ng-template>
      </div>
      <button class="so-btn so-btn-primary so-btn-primary--small mb-3" (click)="create()" name="btn-create">
        <img src="assets/images/svg/add.svg" alt="">
        Thêm mới
      </button>
    </div>
    <table class="table-global w-full mt-5">
      <caption></caption>
      <thead>
        <th style="width: 5%;" class="text-header-table text-center">STT</th>
        <th style="width: 23%;" class="text-header-table"> Tên người dùng</th>
        <th style="width: 10%;" class="text-header-table"> Mã </th>
        <th style="width: 10%;" class="text-header-table"> Tài khoản </th>
        <th style="width: 12%;" class="text-header-table"> SĐT </th>
        <th style="width: 15%;" class="text-header-table"> Email </th>
        <th style="width: 15%;" class="text-header-table"> Trạng thái </th>
        <th style="width: 10%;" class="text-center text-header-table"> Hành động </th>
      </thead>
      <tbody>
        <ng-container *ngFor="let item of listUsers; let i=index">
          <tr>
            <td class="text-content-table text-center">
              {{(pageIndex-1)*pageSize + i + 1}}
            </td>
            <td class="text-content-table">
              <span class="text-link fw-500" [routerLink]="item.id">{{item.fullName}}</span>
            </td>
            <td>
              {{item.code}}
            </td>
            <td>
              {{item.username}}
            </td>
            <td>
              {{item.phone}}
            </td>
            <td>
              {{item.email}}
            </td>
            <td>
              <span class="badge so-badge so-badge-status so-badge-status-{{item?.isActive}}">
                {{mapNameStatus(item?.isActive)}}
              </span>
            </td>
            <td class="text-center">
              <div class="d-flex justify-content-center">
                <button class="btn-remote" (click)="remove(item)" name="btn-remote">
                  <img src="assets/images/svg/icon-delete.svg" alt="">
                </button>
              </div>
            </td>
          </tr>
        </ng-container>
        <tr *ngIf="listUsers?.length == 0 || !listUsers">
          <td class="text-no-data" colspan="8">Không có dữ liệu</td>
        </tr>
      </tbody>
    </table>

    <app-pagination [pageSize]="pageSize" [pageIndex]="pageIndex" [collectionSize]="collectionSize" *ngIf="collectionSize > sizeOption[0]"
      [sizeOption]="sizeOption" (paginationChange)="paginationChange($event)">
    </app-pagination>
  </div>
</div>

<div class="spinner" *ngIf="isLoading">
  <app-loading></app-loading>
</div>
